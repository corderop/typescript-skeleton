#!/bin/sh
. "$(dirname "$0")/_/husky.sh"

LINE="\n---------------------------------------------------------\n"

printf -- $LINE
printf "ğŸ” Looking for staged files..."
STAGED_FILES=$(git diff --name-only --cached -- '*.ts' '*.json' '*.js')
printf " âœ…"
printf -- $LINE

if [ -z "$STAGED_FILES" ]
then
    printf "ğŸ“¦ Not files found for linting. Exiting..."
    printf -- $LINE
    printf "\n"
    exit 0
fi

printf "ğŸ¨ Checking format with prettier...\n\n"
npx prettier --check $STAGED_FILES
printf "\nâœ… All checks passing"
printf -- $LINE

printf "ğŸ’„ Checking linting with eslint...\n"
npm run lint
printf "âœ… All checks passing"
printf -- $LINE
